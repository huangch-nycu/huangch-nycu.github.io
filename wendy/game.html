<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰¾å› æ•¸éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .draggable {
            cursor: grab;
            transition: all 0.2s ease;
            user-select: none;
        }
        .draggable:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .draggable.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
            cursor: grabbing;
        }
        .drop-zone {
            min-height: 60px;
            transition: all 0.2s ease;
            border: 2px dashed #d1d5db;
        }
        .drop-zone.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
            transform: scale(1.02);
        }
        .drop-zone.filled {
            border-color: #10b981;
            background-color: #ecfdf5;
        }
        .correct-answer {
            background-color: #dcfce7 !important;
            border-color: #16a34a !important;
            animation: correctPulse 0.6s ease;
        }
        .incorrect-answer {
            background-color: #fef2f2 !important;
            border-color: #dc2626 !important;
            animation: shake 0.5s ease;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .candidate-number {
            animation: slideIn 0.3s ease forwards;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-purple-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- éŠæˆ²æ¨™é¡Œ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-purple-800 mb-2">ğŸ”¢ æ‰¾å› æ•¸éŠæˆ²</h1>
            <p class="text-lg text-gray-600">æ‰¾å‡ºæ‰€æœ‰çš„å› æ•¸ï¼ŒæŒ‘æˆ°ä½ çš„æ•¸å­¸èƒ½åŠ›ï¼</p>
        </div>

        <!-- ç©å®¶å§“åè¼¸å…¥ -->
        <div id="name-input-area" class="bg-white rounded-xl shadow-lg p-6 mb-6 text-center">
            <div class="mb-4">
                <label for="player-name" class="block text-lg font-semibold text-gray-700 mb-2">
                    ğŸ‘‹ è«‹è¼¸å…¥ä½ çš„å§“å
                </label>
                <input type="text" id="player-name" placeholder="è¼¸å…¥ä½ çš„å§“å..." 
                       class="w-full max-w-md mx-auto px-4 py-3 border-2 border-gray-300 rounded-lg text-center text-lg font-medium focus:border-blue-500 focus:outline-none transition-colors">
            </div>
            <p class="text-sm text-gray-500">
                è¼¸å…¥å§“åå¾Œå°±å¯ä»¥é–‹å§‹éŠæˆ²å›‰ï¼
            </p>
        </div>

        <!-- éŠæˆ²ç‹€æ…‹ -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex justify-between items-center flex-wrap gap-4">
                <div class="flex items-center space-x-6">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-600" id="timer">00:00</div>
                        <div class="text-sm text-gray-500">å·²ç”¨æ™‚é–“</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-600" id="score">0</div>
                        <div class="text-sm text-gray-500">å¾—åˆ†</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-purple-600" id="question-counter">1/10</div>
                        <div class="text-sm text-gray-500">é¡Œç›®é€²åº¦</div>
                    </div>
                </div>
                <button id="start-btn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    é–‹å§‹éŠæˆ²
                </button>
            </div>
        </div>

        <!-- éŠæˆ²å€åŸŸ -->
        <div id="game-area" class="bg-white rounded-xl shadow-lg p-8 mb-6 hidden">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">
                    æ‰¾å‡º <span id="current-number" class="text-blue-600">12</span> çš„æ‰€æœ‰å› æ•¸
                </h2>
                <p class="text-gray-600">æ‹–æ›³ä¸‹æ–¹çš„æ•¸å­—åˆ°ç­”æ¡ˆå€åŸŸï¼ˆåŒ…æ‹¬1å’Œæœ¬èº«ï¼‰</p>
            </div>

            <!-- å€™é¸æ•¸å­—å€ -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold text-gray-700 mb-4 text-center">ğŸ”¢ å€™é¸æ•¸å­—</h3>
                <div id="candidates-container" class="grid grid-cols-3 md:grid-cols-6 gap-3">
                    <!-- å‹•æ…‹ç”Ÿæˆå€™é¸æ•¸å­— -->
                </div>
            </div>

            <!-- ç­”æ¡ˆæ”¾ç½®å€ -->
            <div class="mb-8">
                <h3 class="text-xl font-semibold text-gray-700 mb-4 text-center">ğŸ“ ç­”æ¡ˆå€åŸŸ</h3>
                <div id="answer-zones" class="mb-6">
                    <!-- å‹•æ…‹ç”Ÿæˆæ”¾ç½®å€åŸŸ -->
                </div>
                <div class="text-center">
                    <button id="clear-btn" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        æ¸…ç©ºç­”æ¡ˆ
                    </button>
                </div>
            </div>

            <!-- æ“ä½œæŒ‰éˆ• -->
            <div class="flex justify-center space-x-4">
                <button id="check-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                    æª¢æŸ¥ç­”æ¡ˆ
                </button>
                <button id="next-btn" class="bg-purple-500 hover:bg-purple-600 text-white px-8 py-3 rounded-lg font-semibold transition-colors hidden">
                    ä¸‹ä¸€é¡Œ
                </button>
            </div>

            <!-- ç­”æ¡ˆåé¥‹ -->
            <div id="feedback" class="mt-6 text-center hidden">
                <div id="feedback-message" class="text-lg font-semibold mb-4"></div>
                <div id="correct-answer" class="text-gray-600"></div>
            </div>
        </div>

        <!-- çµæœé é¢ -->
        <div id="result-area" class="bg-white rounded-xl shadow-lg p-8 text-center hidden">
            <div class="mb-6">
                <div class="text-6xl mb-4" id="result-emoji">ğŸ‰</div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4" id="result-title">éŠæˆ²çµæŸï¼</h2>
                <div class="text-xl text-gray-600 mb-6">
                    ä½ çš„æœ€çµ‚å¾—åˆ†ï¼š<span id="final-score" class="font-bold text-blue-600">0</span> åˆ†
                </div>
                <div id="performance-message" class="text-lg text-gray-600 mb-6"></div>
            </div>
            <button id="restart-btn" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-lg font-semibold transition-colors">
                é‡æ–°é–‹å§‹
            </button>
        </div>
    </div>

    <!-- é è…³è¨­è¨ˆè€…è³‡è¨Š -->
    <footer class="bg-gray-100 py-4 mt-8">
        <div class="container mx-auto px-4 text-center">
            <div class="text-sm text-gray-600">
                ğŸ‘©â€ğŸ« å³æ›‰é›¯è€å¸«è¨­è¨ˆ
            </div>
        </div>
    </footer>

    <script>
        class FactorGame {
            constructor() {
                this.currentQuestion = 0;
                this.totalQuestions = 10;
                this.score = 0;
                this.timeElapsed = 0; // æ¯é¡Œå¾0ç§’é–‹å§‹ç´¯è¨ˆ
                this.totalGameTime = 0; // ç¸½éŠæˆ²æ™‚é–“
                this.gameStartTime = 0; // éŠæˆ²é–‹å§‹æ™‚é–“
                this.timer = null;
                this.gameStarted = false;
                this.questions = [];
                this.currentFactors = [];
                this.playerName = '';
                
                this.initializeElements();
                this.generateQuestions();
                this.bindEvents();
            }

            initializeElements() {
                this.startBtn = document.getElementById('start-btn');
                this.gameArea = document.getElementById('game-area');
                this.resultArea = document.getElementById('result-area');
                this.nameInputArea = document.getElementById('name-input-area');
                this.playerNameInput = document.getElementById('player-name');
                this.timerDisplay = document.getElementById('timer');
                this.scoreDisplay = document.getElementById('score');
                this.questionCounter = document.getElementById('question-counter');
                this.currentNumberDisplay = document.getElementById('current-number');
                this.answerZones = document.getElementById('answer-zones');
                this.candidatesContainer = document.getElementById('candidates-container');
                this.clearBtn = document.getElementById('clear-btn');
                this.checkBtn = document.getElementById('check-btn');
                this.nextBtn = document.getElementById('next-btn');
                this.feedback = document.getElementById('feedback');
                this.feedbackMessage = document.getElementById('feedback-message');
                this.correctAnswer = document.getElementById('correct-answer');
                this.finalScore = document.getElementById('final-score');
                this.resultTitle = document.getElementById('result-title');
                this.resultEmoji = document.getElementById('result-emoji');
                this.performanceMessage = document.getElementById('performance-message');
                this.restartBtn = document.getElementById('restart-btn');
            }

            generateQuestions() {
                // é©åˆäº”å¹´ç´šçš„æ•¸å­—ï¼Œæœ‰ä¸åŒæ•¸é‡çš„å› æ•¸
                const numbers = [12, 18, 24, 16, 20, 15, 30, 36, 28, 32];
                this.questions = numbers.slice(0, this.totalQuestions);
            }

            findFactors(num) {
                const factors = [];
                for (let i = 1; i <= num; i++) {
                    if (num % i === 0) {
                        factors.push(i);
                    }
                }
                return factors.sort((a, b) => a - b);
            }

            bindEvents() {
                this.startBtn.addEventListener('click', () => this.startGame());
                this.checkBtn.addEventListener('click', () => this.checkAnswer());
                this.nextBtn.addEventListener('click', () => this.nextQuestion());
                this.clearBtn.addEventListener('click', () => this.clearAnswers());
                this.restartBtn.addEventListener('click', () => this.restartGame());
            }

            startGame() {
                // æª¢æŸ¥æ˜¯å¦è¼¸å…¥å§“å
                this.playerName = this.playerNameInput.value.trim();
                if (!this.playerName) {
                    alert('è«‹å…ˆè¼¸å…¥ä½ çš„å§“åï¼');
                    this.playerNameInput.focus();
                    return;
                }
                
                this.gameStarted = true;
                this.currentQuestion = 0;
                this.score = 0;
                this.timeElapsed = 0;
                this.gameStartTime = Date.now();
                
                this.startBtn.classList.add('hidden');
                this.nameInputArea.classList.add('hidden');
                this.gameArea.classList.remove('hidden');
                this.resultArea.classList.add('hidden');
                
                this.startTimer();
                this.loadQuestion();
            }

            startTimer() {
                this.timer = setInterval(() => {
                    this.timeElapsed++;
                    this.updateTimerDisplay();
                }, 1000);
            }

            updateTimerDisplay() {
                const minutes = Math.floor(this.timeElapsed / 60);
                const seconds = this.timeElapsed % 60;
                this.timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }

            loadQuestion() {
                const number = this.questions[this.currentQuestion];
                this.currentFactors = this.findFactors(number);
                
                this.currentNumberDisplay.textContent = number;
                this.questionCounter.textContent = `${this.currentQuestion + 1}/${this.totalQuestions}`;
                
                this.createAnswerZones();
                this.createCandidateNumbers(number);
                this.hideElements();
            }

            createAnswerZones() {
                this.answerZones.innerHTML = '';
                
                // å‰µå»ºä¸€å€‹å¤§çš„ç­”æ¡ˆå€åŸŸ
                const zone = document.createElement('div');
                zone.className = 'drop-zone min-h-32 p-4 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 flex flex-wrap gap-2 items-start';
                zone.innerHTML = '<div class="w-full text-center text-gray-400 text-lg font-semibold">å°‡å› æ•¸æ‹–æ›³åˆ°é€™è£¡</div>';
                zone.dataset.answers = '[]'; // å„²å­˜ç­”æ¡ˆçš„é™£åˆ—
                
                this.setupDropZone(zone);
                this.answerZones.appendChild(zone);
            }

            createCandidateNumbers(targetNumber) {
                this.candidatesContainer.innerHTML = '';
                
                // ç”Ÿæˆå€™é¸æ•¸å­—ï¼šåŒ…å«æ­£ç¢ºå› æ•¸å’Œä¸€äº›å¹²æ“¾é …
                const candidates = new Set();
                
                // æ·»åŠ æ­£ç¢ºå› æ•¸
                this.currentFactors.forEach(factor => candidates.add(factor));
                
                // æ·»åŠ ä¸€äº›å¹²æ“¾é …
                const distractors = [];
                for (let i = 1; i <= targetNumber; i++) {
                    if (!this.currentFactors.includes(i)) {
                        distractors.push(i);
                    }
                }
                
                // éš¨æ©Ÿé¸æ“‡ä¸€äº›å¹²æ“¾é …
                const shuffledDistractors = distractors.sort(() => Math.random() - 0.5);
                const numDistractors = Math.min(6, shuffledDistractors.length);
                for (let i = 0; i < numDistractors; i++) {
                    candidates.add(shuffledDistractors[i]);
                }
                
                // è½‰æ›ç‚ºé™£åˆ—ä¸¦ç”±å°åˆ°å¤§æ’åº
                const candidateArray = Array.from(candidates).sort((a, b) => a - b);
                
                // å‰µå»ºå€™é¸æ•¸å­—å…ƒç´ 
                candidateArray.forEach((num, index) => {
                    const candidate = document.createElement('div');
                    candidate.className = 'candidate-number draggable bg-blue-100 hover:bg-blue-200 border-2 border-blue-300 rounded-lg p-3 text-center text-lg font-bold text-blue-800 cursor-grab';
                    candidate.textContent = num;
                    candidate.dataset.number = num;
                    candidate.draggable = true;
                    candidate.style.animationDelay = `${index * 0.1}s`;
                    
                    this.setupDraggable(candidate);
                    this.candidatesContainer.appendChild(candidate);
                });
            }

            setupDraggable(element) {
                element.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', element.dataset.number);
                    element.classList.add('dragging');
                });
                
                element.addEventListener('dragend', () => {
                    element.classList.remove('dragging');
                });
            }

            setupDropZone(zone) {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    
                    const number = parseInt(e.dataTransfer.getData('text/plain'));
                    if (number) {
                        const answers = JSON.parse(zone.dataset.answers);
                        
                        // æª¢æŸ¥æ˜¯å¦å·²ç¶“å­˜åœ¨
                        if (!answers.includes(number)) {
                            answers.push(number);
                            zone.dataset.answers = JSON.stringify(answers);
                            this.updateAnswerDisplay(zone, answers);
                            
                            // éš±è—å°æ‡‰çš„å€™é¸æ•¸å­—
                            const candidate = this.candidatesContainer.querySelector(`[data-number="${number}"]`);
                            if (candidate) {
                                candidate.style.opacity = '0.3';
                                candidate.style.pointerEvents = 'none';
                            }
                        }
                    }
                });
            }
            
            updateAnswerDisplay(zone, answers) {
                if (answers.length === 0) {
                    zone.innerHTML = '<div class="w-full text-center text-gray-400 text-lg font-semibold">å°‡å› æ•¸æ‹–æ›³åˆ°é€™è£¡</div>';
                } else {
                    const sortedAnswers = [...answers].sort((a, b) => a - b);
                    zone.innerHTML = sortedAnswers.map(num => 
                        `<div class="bg-blue-100 border-2 border-blue-300 rounded-lg px-3 py-2 text-blue-800 font-bold cursor-pointer hover:bg-blue-200" data-answer="${num}">${num}</div>`
                    ).join('');
                    
                    // ç‚ºæ¯å€‹ç­”æ¡ˆæ·»åŠ é»æ“Šç§»é™¤åŠŸèƒ½
                    zone.querySelectorAll('[data-answer]').forEach(answerEl => {
                        answerEl.addEventListener('click', () => {
                            const numToRemove = parseInt(answerEl.dataset.answer);
                            const currentAnswers = JSON.parse(zone.dataset.answers);
                            const newAnswers = currentAnswers.filter(n => n !== numToRemove);
                            zone.dataset.answers = JSON.stringify(newAnswers);
                            this.updateAnswerDisplay(zone, newAnswers);
                            
                            // æ¢å¾©å°æ‡‰çš„å€™é¸æ•¸å­—
                            const candidate = this.candidatesContainer.querySelector(`[data-number="${numToRemove}"]`);
                            if (candidate) {
                                candidate.style.opacity = '1';
                                candidate.style.pointerEvents = 'auto';
                            }
                        });
                    });
                }
            }

            clearAnswers() {
                const zone = this.answerZones.querySelector('.drop-zone');
                if (zone) {
                    const answers = JSON.parse(zone.dataset.answers);
                    
                    // æ¢å¾©æ‰€æœ‰å€™é¸æ•¸å­—
                    answers.forEach(number => {
                        const candidate = this.candidatesContainer.querySelector(`[data-number="${number}"]`);
                        if (candidate) {
                            candidate.style.opacity = '1';
                            candidate.style.pointerEvents = 'auto';
                        }
                    });
                    
                    // æ¸…ç©ºç­”æ¡ˆå€åŸŸ
                    zone.dataset.answers = '[]';
                    this.updateAnswerDisplay(zone, []);
                    zone.classList.remove('correct-answer', 'incorrect-answer');
                }
            }

            hideElements() {
                this.feedback.classList.add('hidden');
                this.nextBtn.classList.add('hidden');
                this.checkBtn.classList.remove('hidden');
                
                // æ¸…é™¤ä¹‹å‰çš„æ¨£å¼
                const zone = this.answerZones.querySelector('.drop-zone');
                if (zone) {
                    zone.classList.remove('correct-answer', 'incorrect-answer');
                }
            }

            checkAnswer() {
                const zone = this.answerZones.querySelector('.drop-zone');
                const userAnswers = JSON.parse(zone.dataset.answers);
                
                // æª¢æŸ¥ç­”æ¡ˆæ­£ç¢ºæ€§
                const correctAnswers = this.currentFactors.slice().sort((a, b) => a - b);
                const sortedUserAnswers = userAnswers.slice().sort((a, b) => a - b);
                
                const isCompletelyCorrect = JSON.stringify(correctAnswers) === JSON.stringify(sortedUserAnswers);
                
                // è¨ˆç®—æ­£ç¢ºçš„ç­”æ¡ˆæ•¸é‡
                const correctCount = userAnswers.filter(answer => this.currentFactors.includes(answer)).length;

                // è¦–è¦ºåé¥‹
                if (isCompletelyCorrect) {
                    zone.classList.add('correct-answer');
                    zone.classList.remove('incorrect-answer');
                    this.score += 10;
                    this.feedbackMessage.textContent = 'ğŸ‰ å®Œå…¨æ­£ç¢ºï¼å¤ªæ£’äº†ï¼';
                    this.feedbackMessage.className = 'text-lg font-semibold mb-4 text-green-600';
                } else {
                    zone.classList.add('incorrect-answer');
                    zone.classList.remove('correct-answer');
                    const partialScore = Math.floor((correctCount / this.currentFactors.length) * 5);
                    this.score += partialScore;
                    this.feedbackMessage.textContent = `ğŸ˜Š éƒ¨åˆ†æ­£ç¢ºï¼ç²å¾— ${partialScore} åˆ†`;
                    this.feedbackMessage.className = 'text-lg font-semibold mb-4 text-orange-600';
                }

                this.correctAnswer.textContent = `æ­£ç¢ºç­”æ¡ˆï¼š${this.currentFactors.join(', ')}`;
                this.scoreDisplay.textContent = this.score;
                
                this.feedback.classList.remove('hidden');
                this.checkBtn.classList.add('hidden');
                this.nextBtn.classList.remove('hidden');
                
                // åœæ­¢è¨ˆæ™‚å™¨
                clearInterval(this.timer);
                
                // ç¦ç”¨æ‹–æ›³åŠŸèƒ½
                const candidates = this.candidatesContainer.querySelectorAll('.draggable');
                candidates.forEach(candidate => {
                    candidate.draggable = false;
                    candidate.style.opacity = '0.6';
                    candidate.style.cursor = 'not-allowed';
                });
            }





            nextQuestion() {
                this.currentQuestion++;
                if (this.currentQuestion >= this.totalQuestions) {
                    this.endGame();
                } else {
                    // é‡ç½®è¨ˆæ™‚å™¨ç‚º0ç§’é–‹å§‹
                    clearInterval(this.timer);
                    this.timeElapsed = 0;
                    this.updateTimerDisplay();
                    this.startTimer();
                    this.loadQuestion();
                }
            }

            endGame() {
                clearInterval(this.timer);
                
                // è¨ˆç®—ç¸½éŠæˆ²æ™‚é–“
                this.totalGameTime = Math.floor((Date.now() - this.gameStartTime) / 1000);
                
                this.gameArea.classList.add('hidden');
                this.resultArea.classList.remove('hidden');
                
                this.finalScore.textContent = this.score;
                
                // æ ¼å¼åŒ–ç¸½æ™‚é–“
                const totalMinutes = Math.floor(this.totalGameTime / 60);
                const totalSeconds = this.totalGameTime % 60;
                const timeString = `${totalMinutes.toString().padStart(2, '0')}:${totalSeconds.toString().padStart(2, '0')}`;
                
                // æ ¹æ“šå¾—åˆ†çµ¦å‡ºä¸åŒçš„åé¥‹
                if (this.score >= 80) {
                    this.resultEmoji.textContent = 'ğŸ†';
                    this.resultTitle.textContent = `${this.playerName}ï¼Œå¤ªå²å®³äº†ï¼`;
                    this.performanceMessage.textContent = `ä½ æ˜¯å› æ•¸å¤§å¸«ï¼æ•¸å­¸èƒ½åŠ›è¶…å¼·ï¼\nç¸½ç”¨æ™‚ï¼š${timeString}`;
                } else if (this.score >= 60) {
                    this.resultEmoji.textContent = 'ğŸ‰';
                    this.resultTitle.textContent = `${this.playerName}ï¼Œè¡¨ç¾å¾ˆå¥½ï¼`;
                    this.performanceMessage.textContent = `ä½ å°å› æ•¸çš„ç†è§£å¾ˆä¸éŒ¯ï¼Œç¹¼çºŒåŠ æ²¹ï¼\nç¸½ç”¨æ™‚ï¼š${timeString}`;
                } else if (this.score >= 40) {
                    this.resultEmoji.textContent = 'ğŸ˜Š';
                    this.resultTitle.textContent = `${this.playerName}ï¼Œä¸éŒ¯çš„å˜—è©¦ï¼`;
                    this.performanceMessage.textContent = `é‚„æœ‰é€²æ­¥ç©ºé–“ï¼Œå¤šç·´ç¿’å°±æœƒæ›´å¥½ï¼\nç¸½ç”¨æ™‚ï¼š${timeString}`;
                } else {
                    this.resultEmoji.textContent = 'ğŸ’ª';
                    this.resultTitle.textContent = `${this.playerName}ï¼Œç¹¼çºŒåŠªåŠ›ï¼`;
                    this.performanceMessage.textContent = `åˆ¥ç°å¿ƒï¼Œå¤šç·´ç¿’æ‰¾å› æ•¸ï¼Œä½ ä¸€å®šæœƒé€²æ­¥çš„ï¼\nç¸½ç”¨æ™‚ï¼š${timeString}`;
                }
            }

            restartGame() {
                this.gameStarted = false;
                clearInterval(this.timer);
                
                this.resultArea.classList.add('hidden');
                this.startBtn.classList.remove('hidden');
                this.nameInputArea.classList.remove('hidden');
                
                // é‡ç½®é¡¯ç¤º
                this.scoreDisplay.textContent = '0';
                this.questionCounter.textContent = '1/10';
                this.timerDisplay.textContent = '00:00';
                this.playerNameInput.value = '';
                
                // é‡æ–°ç”Ÿæˆé¡Œç›®
                this.generateQuestions();
            }
        }

        // åˆå§‹åŒ–éŠæˆ²
        document.addEventListener('DOMContentLoaded', () => {
            new FactorGame();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97ee11007164a9c8',t:'MTc1NzgzMzg0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
